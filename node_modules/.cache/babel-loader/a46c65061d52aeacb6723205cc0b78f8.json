{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { WalletContext, WalletStatus } from '@terra-dev/use-wallet';\nimport { useEffect, useMemo, useState } from 'react';\nimport { WalletController } from '../controller';\nconst EMPTY_ARRAY = [];\nexport function WalletProvider({\n  children,\n  defaultNetwork,\n  walletConnectChainIds,\n  connectorOpts,\n  pushServerOpts,\n  createReadonlyWalletSession,\n  waitingChromeExtensionInstallCheck,\n  dangerously__chromeExtensionCompatibleBrowserCheck\n}) {\n  const [controller] = useState(() => new WalletController({\n    defaultNetwork,\n    walletConnectChainIds,\n    connectorOpts,\n    pushServerOpts,\n    createReadonlyWalletSession,\n    waitingChromeExtensionInstallCheck,\n    dangerously__chromeExtensionCompatibleBrowserCheck\n  }));\n  const [availableConnectTypes, setAvailableConnectTypes] = useState(() => []);\n  const [availableInstallTypes, setAvailableInstallTypes] = useState(() => []);\n  const [states, setStates] = useState(() => ({\n    status: WalletStatus.INITIALIZING,\n    network: defaultNetwork\n  }));\n  useEffect(() => {\n    const availableConnectTypesSubscription = controller.availableConnectTypes().subscribe({\n      next: value => {\n        setAvailableConnectTypes(value);\n      }\n    });\n    const availableInstallTypesSubscription = controller.availableInstallTypes().subscribe({\n      next: value => {\n        setAvailableInstallTypes(value);\n      }\n    });\n    const statesSubscription = controller.states().subscribe({\n      next: value => {\n        setStates(value);\n      }\n    });\n    return () => {\n      availableConnectTypesSubscription.unsubscribe();\n      availableInstallTypesSubscription.unsubscribe();\n      statesSubscription.unsubscribe();\n    };\n  }, [controller]);\n  const state = useMemo(() => {\n    return {\n      availableConnectTypes,\n      availableInstallTypes,\n      status: states.status,\n      network: states.network,\n      wallets: states.status === WalletStatus.WALLET_CONNECTED ? states.wallets : EMPTY_ARRAY,\n      install: controller.install,\n      connect: controller.connect,\n      connectReadonly: controller.connectReadonly,\n      disconnect: controller.disconnect,\n      post: controller.post,\n      sign: controller.sign,\n      recheckStatus: controller.recheckStatus,\n      isChromeExtensionCompatibleBrowser: controller.isChromeExtensionCompatibleBrowser\n    };\n  }, [availableConnectTypes, availableInstallTypes, controller.connect, controller.connectReadonly, controller.disconnect, controller.install, controller.post, controller.sign, controller.recheckStatus, controller.isChromeExtensionCompatibleBrowser, states]);\n  return _jsx(WalletContext.Provider, Object.assign({\n    value: state\n  }, {\n    children: children\n  }), void 0);\n}","map":{"version":3,"sources":["../../../../src/@terra-money/wallet-provider/react/WalletProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  ConnectType,\n  Wallet,\n  WalletContext,\n  WalletInfo,\n  WalletStates,\n  WalletStatus,\n} from '@terra-dev/use-wallet';\nimport React, { ReactNode, useEffect, useMemo, useState } from 'react';\nimport { WalletController, WalletControllerOptions } from '../controller';\n\nexport interface WalletProviderProps extends WalletControllerOptions {\n  children: ReactNode;\n}\n\nconst EMPTY_ARRAY: WalletInfo[] = [];\n\nexport function WalletProvider({\n  children,\n  defaultNetwork,\n  walletConnectChainIds,\n  connectorOpts,\n  pushServerOpts,\n  createReadonlyWalletSession,\n  waitingChromeExtensionInstallCheck,\n  dangerously__chromeExtensionCompatibleBrowserCheck,\n}: WalletProviderProps) {\n  const [controller] = useState<WalletController>(\n    () =>\n      new WalletController({\n        defaultNetwork,\n        walletConnectChainIds,\n        connectorOpts,\n        pushServerOpts,\n        createReadonlyWalletSession,\n        waitingChromeExtensionInstallCheck,\n        dangerously__chromeExtensionCompatibleBrowserCheck,\n      }),\n  );\n\n  const [availableConnectTypes, setAvailableConnectTypes] = useState<\n    ConnectType[]\n  >(() => []);\n\n  const [availableInstallTypes, setAvailableInstallTypes] = useState<\n    ConnectType[]\n  >(() => []);\n\n  const [states, setStates] = useState<WalletStates>(() => ({\n    status: WalletStatus.INITIALIZING,\n    network: defaultNetwork,\n  }));\n\n  useEffect(() => {\n    const availableConnectTypesSubscription = controller\n      .availableConnectTypes()\n      .subscribe({\n        next: (value) => {\n          setAvailableConnectTypes(value);\n        },\n      });\n\n    const availableInstallTypesSubscription = controller\n      .availableInstallTypes()\n      .subscribe({\n        next: (value) => {\n          setAvailableInstallTypes(value);\n        },\n      });\n\n    const statesSubscription = controller.states().subscribe({\n      next: (value) => {\n        setStates(value);\n      },\n    });\n\n    return () => {\n      availableConnectTypesSubscription.unsubscribe();\n      availableInstallTypesSubscription.unsubscribe();\n      statesSubscription.unsubscribe();\n    };\n  }, [controller]);\n\n  const state = useMemo<Wallet>(() => {\n    return {\n      availableConnectTypes,\n      availableInstallTypes,\n      status: states.status,\n      network: states.network,\n      wallets:\n        states.status === WalletStatus.WALLET_CONNECTED\n          ? states.wallets\n          : EMPTY_ARRAY,\n      install: controller.install,\n      connect: controller.connect,\n      connectReadonly: controller.connectReadonly,\n      disconnect: controller.disconnect,\n      post: controller.post,\n      sign: controller.sign,\n      recheckStatus: controller.recheckStatus,\n      isChromeExtensionCompatibleBrowser:\n        controller.isChromeExtensionCompatibleBrowser,\n    };\n  }, [\n    availableConnectTypes,\n    availableInstallTypes,\n    controller.connect,\n    controller.connectReadonly,\n    controller.disconnect,\n    controller.install,\n    controller.post,\n    controller.sign,\n    controller.recheckStatus,\n    controller.isChromeExtensionCompatibleBrowser,\n    states,\n  ]);\n\n  return (\n    <WalletContext.Provider value={state}>{children}</WalletContext.Provider>\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}